import{u as _,r as c,b as k,d as B,N as C,e as I,c as p,a as m,f as l,w as f,g as N,h as E,o as v,t as O,i as U,j as r,V as A,k as j}from"./DZR_Vk-B.js";import{u as T,V as F,a as h,r as g,e as L,m as M}from"./DP1XmVjS.js";import"./B-HIHHZX.js";const D=()=>_().$device,P=()=>{const s=D();let e="";if(s.isMacOS)e="MacOS";else if(s.isWindows)e="Windows";else if(s.isIos)e="iOS";else if(s.isAndroid)e="Android";else return"Unknown";return s.isChrome?e+" Chrome":s.isFirefox?e+" Firefox":s.isSafari?e+" Safari":s.isEdge?e+" Edge":e+" Unknown"},R={class:"mt-12 pt-12"},W={key:0,class:"text-h6 text-error"},q=m("div",{class:"text-subtitle-1 text-medium-emphasis"},"Account",-1),z=m("div",{class:"text-subtitle-1 text-medium-emphasis d-flex align-center justify-space-between"}," Password ",-1),X={__name:"index",setup(s){const e=c(!1),o=c(!1),d=c(""),w=P(),x=k(),b=B(),y=C(),V=E().public.baseUrl;y.clear();const n=I({...{email:"",password:"",device:w}}),$={email:{required:g,email:L},password:{required:g,minLength:M(5)}},a=T($,n),S=async()=>{if(o.value=!0,a.value.$invalid){a.value.$touch(),o.value=!1;return}await $fetch(`${V}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(n)}).then(u=>{x.login(u),o.value=!1,b.push({name:"index"})}).catch(u=>{d.value="Invalid email or password",o.value=!1})};return(u,i)=>(v(),p("form",{onSubmit:N(S,["prevent"])},[m("div",R,[l(F,{class:"mx-auto pa-12 pb-8",elevation:"8","max-width":"448",rounded:"lg"},{default:f(()=>[d.value?(v(),p("p",W,O(d.value),1)):U("",!0),q,l(h,{density:"compact",placeholder:"Email address","prepend-inner-icon":"mdi-email-outline",variant:"outlined",modelValue:n.email,"onUpdate:modelValue":i[0]||(i[0]=t=>n.email=t),"error-messages":r(a).email.$errors.map(t=>t.$message),onBlur:r(a).email.$touch,onInput:r(a).email.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),z,l(h,{"append-inner-icon":e.value?"mdi-eye-off":"mdi-eye",type:e.value?"text":"password",density:"compact",placeholder:"Enter your password","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":i[1]||(i[1]=t=>e.value=!e.value),modelValue:n.password,"onUpdate:modelValue":i[2]||(i[2]=t=>n.password=t),"error-messages":r(a).password.$errors.map(t=>t.$message),onBlur:r(a).password.$touch,onInput:r(a).password.$touch},null,8,["append-inner-icon","type","modelValue","error-messages","onBlur","onInput"]),l(A,{class:"mb-8",color:"primary",size:"large",block:"",type:"submit",loading:o.value,disabled:o.value},{default:f(()=>[j(" Log In ")]),_:1},8,["loading","disabled"])]),_:1})])],32))}};export{X as default};
